import{j as e,r as i}from"./index-main-CMl0ASNY.js";import{a as N,c as w}from"./github2-CsDzPMB4.js";import{M as k,r as M,N as v}from"./NotionImageRenderer-DooTHHGf.js";import{T as R}from"./index-hR2WEy2-.js";const T="_tree_1pbph_2",C="_arrow_1pbph_17",S="_open_1pbph_31",a={tree:T,"tree-node":"_tree-node_1pbph_6","tree-label":"_tree-label_1pbph_10",arrow:C,open:S,"tree-children":"_tree-children_1pbph_36"},$=({label:t,children:o,item:r,onClick:c})=>{const[d,l]=i.useState(!1),h=()=>{l(!d),c(r)};return e.jsxs("div",{className:a["tree-node"],children:[e.jsxs("div",{className:a["tree-label"],onClick:h,children:[r.type==="directory"&&e.jsx("span",{className:`${a.arrow} ${d?a.open:""}`}),t]}),e.jsx("div",{className:`${a["tree-children"]} ${d?a.open:""}`,children:o})]})},y=({dataSource:t=[],onClick:o})=>e.jsx("div",{className:a.tree,children:t.map((r,c)=>e.jsx($,{label:r.name,item:r,onClick:o,children:r.children&&r.children.length>0?e.jsx(y,{dataSource:r.children,onClick:o}):null},c))}),E="_MarkdownRenderer_ysfbt_2",F={MarkdownRenderer:E,"code-block":"_code-block_ysfbt_8"},I=({data:t})=>{const[o,r]=i.useState("");return i.useEffect(()=>{r(t)},[t]),e.jsx("div",{className:F.MarkdownRenderer,children:e.jsx(k,{children:o,remarkPlugins:[M],components:{img:c=>e.jsx(v,{...c}),code:({node:c,inline:d,className:l,children:h,...p})=>{const x=l?l.replace("language-",""):"";return e.jsx("pre",{className:`code-block ${x}`,...p,children:e.jsx("code",{children:h})})}}})})},O="_note_f6x2x_1",A="_menu_f6x2x_13",B="_content_f6x2x_20",D="_header_f6x2x_27",u={note:O,"note-content":"_note-content_f6x2x_7",menu:A,content:B,header:D},j="Muliminty",g="Muliminty-Note",K=()=>{const[t,o]=i.useState([]),[r,c]=i.useState("暂无数据"),[d,l]=i.useState(!1);i.useEffect(()=>{h()},[]);const h=async()=>{l(!0);try{const n=await N(j,g),s=p(n);o(s)}catch(n){console.error("获取仓库树形结构失败",n)}finally{l(!1)}},p=n=>n.reduce((s,f)=>{if(x(f)){const m=_(f);m&&s.push(m)}return s},[]),x=n=>![".gitignore",".git",".obsidian",".vscode","test.txt","README.md","剪藏"].includes(n.name),_=n=>{if(n.type==="file"&&n.extension!=="md")return null;if(n.type==="directory"){const s=n.children.map(_).filter(Boolean);return s.length===0?null:{...n,children:s}}return n},b=async n=>{console.log("filePath: ",n);try{const s=await w(j,g,n.path);c(s)}catch(s){console.error("获取文件内容失败",s)}};return e.jsxs("div",{className:u.note,children:[e.jsx(G,{}),e.jsxs("div",{className:u["note-content"],children:[e.jsx(H,{dataSource:t,onClick:b}),e.jsx(L,{data:r})]})]})},G=()=>e.jsxs("div",{className:u.header,children:[e.jsx("h3",{children:"Muliminty"}),e.jsx(R,{})]}),H=({dataSource:t=[],onClick:o})=>e.jsx("div",{className:u.menu,children:e.jsx(y,{dataSource:t,onClick:o})}),L=({data:t})=>e.jsx("div",{className:u.content,children:t?e.jsx(I,{data:t}):e.jsx("div",{children:"暂无数据"})});export{K as default};
