import{j as e,r as i,u as k,a as M}from"./index-main-D_2xeyly.js";import{a as R,c as b}from"./github2-CIInxu-w.js";import{M as C,r as T,N as S}from"./NotionImageRenderer-D0Rm8IIa.js";import{T as $}from"./index-CPBA9R3F.js";const q="_tree_1oesq_2",E="_arrow_1oesq_17",F="_open_1oesq_31",l={tree:q,"tree-node":"_tree-node_1oesq_6","tree-label":"_tree-label_1oesq_10",arrow:E,open:F,"tree-children":"_tree-children_1oesq_37"},I=({label:t,children:o,item:r,onClick:c})=>{const[d,a]=i.useState(!1),u=()=>{a(!d),r.type==="file"&&c(r)};return e.jsxs("div",{className:l["tree-node"],children:[e.jsxs("div",{className:l["tree-label"],onClick:u,children:[r.type==="directory"&&e.jsx("span",{className:`${l.arrow} ${d?l.open:""}`}),t]}),e.jsx("div",{className:`${l["tree-children"]} ${d?l.open:""}`,children:o})]})},y=({dataSource:t=[],onClick:o})=>e.jsx("div",{className:l.tree,children:t.map((r,c)=>e.jsx(I,{label:r.name,item:r,onClick:o,children:r.children&&r.children.length>0?e.jsx(y,{dataSource:r.children,onClick:o}):null},c))}),G="_MarkdownRenderer_ysfbt_2",H={MarkdownRenderer:G,"code-block":"_code-block_ysfbt_8"},L=({data:t})=>{const[o,r]=i.useState("");return i.useEffect(()=>{r(t)},[t]),e.jsx("div",{className:H.MarkdownRenderer,children:e.jsx(C,{children:o,remarkPlugins:[T],components:{img:c=>e.jsx(S,{...c}),code:({node:c,inline:d,className:a,children:u,..._})=>{const m=a?a.replace("language-",""):"";return e.jsx("pre",{className:`code-block ${m}`,..._,children:e.jsx("code",{children:u})})}}})})},O="_note_1gdv7_1",A="_menu_1gdv7_13",B="_content_1gdv7_20",D="_header_1gdv7_27",h={note:O,"note-content":"_note-content_1gdv7_7",menu:A,content:B,header:D},g="Muliminty",j="Muliminty-Note",W=()=>{const[t,o]=i.useState([]),[r,c]=i.useState("## 选择你感兴趣的内容吧"),[d,a]=i.useState(!1),u=k();i.useEffect(()=>{_()},[]);const _=async()=>{a(!0);try{const n=await R(g,j),s=m(n);o(s)}catch(n){c("## 敬请期待"),console.error("获取仓库树形结构失败",n)}finally{a(!1)}},m=n=>n.reduce((s,p)=>{if(v(p)){const x=f(p);x&&s.push(x)}return s},[]),v=n=>![".gitignore",".git",".obsidian",".vscode","test.txt","README.md","剪藏"].includes(n.name),f=n=>{if(n.type==="file"&&n.extension!=="md")return null;if(n.type==="directory"){const s=n.children.map(f).filter(Boolean);return s.length===0?null:{...n,children:s}}return n},N=async n=>{console.log("filePath: ",n);try{a(!0);const s=await b(g,j,n.path);c(s)}catch(s){c("加载失败"),console.error("获取文件内容失败",s)}finally{a(!1)}},w=()=>{u("/")};return e.jsxs("div",{className:h.note,children:[e.jsx(P,{onGoHome:w}),e.jsxs("div",{className:h["note-content"],children:[e.jsx(z,{dataSource:t,onClick:N}),d?e.jsx(M,{style:{width:"100%",height:"100%"}}):e.jsx(J,{data:r})]})]})},P=({onGoHome:t})=>e.jsxs("div",{className:h.header,children:[e.jsx("h3",{onClick:t,style:{cursor:"pointer"},children:"Muliminty"}),e.jsx($,{})]}),z=({dataSource:t=[],onClick:o})=>e.jsx("div",{className:h.menu,children:e.jsx(y,{dataSource:t,onClick:o})}),J=({data:t})=>e.jsx("div",{className:h.content,children:t?e.jsx(L,{data:t}):e.jsx("div",{children:"暂无数据"})});export{W as default};
