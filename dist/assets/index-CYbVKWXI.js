import{j as e,r as i,u as k,a as M}from"./index-main-DKSjB_Uh.js";import{a as R,c as b}from"./github2-CIInxu-w.js";import{M as C,r as T,N as S}from"./NotionImageRenderer-B4KmY4l6.js";import{T as $}from"./index-BazTF3fz.js";const E="_tree_mlr8f_2",F="_arrow_mlr8f_17",I="_open_mlr8f_31",a={tree:E,"tree-node":"_tree-node_mlr8f_6","tree-label":"_tree-label_mlr8f_10",arrow:F,open:I,"tree-children":"_tree-children_mlr8f_37"},G=({label:t,children:o,item:r,onClick:c})=>{const[d,l]=i.useState(!1),u=()=>{l(!d),r.type==="file"&&c(r)};return e.jsxs("div",{className:a["tree-node"],children:[e.jsxs("div",{className:a["tree-label"],onClick:u,children:[r.type==="directory"&&e.jsx("span",{className:`${a.arrow} ${d?a.open:""}`}),t]}),e.jsx("div",{className:`${a["tree-children"]} ${d?a.open:""}`,children:o})]})},y=({dataSource:t=[],onClick:o})=>e.jsx("div",{className:a.tree,children:t.map((r,c)=>e.jsx(G,{label:r.name,item:r,onClick:o,children:r.children&&r.children.length>0?e.jsx(y,{dataSource:r.children,onClick:o}):null},c))}),H="_MarkdownRenderer_ysfbt_2",L={MarkdownRenderer:H,"code-block":"_code-block_ysfbt_8"},O=({data:t})=>{const[o,r]=i.useState("");return i.useEffect(()=>{r(t)},[t]),e.jsx("div",{className:L.MarkdownRenderer,children:e.jsx(C,{children:o,remarkPlugins:[T],components:{img:c=>e.jsx(S,{...c}),code:({node:c,inline:d,className:l,children:u,...m})=>{const f=l?l.replace("language-",""):"";return e.jsx("pre",{className:`code-block ${f}`,...m,children:e.jsx("code",{children:u})})}}})})},A="_note_1gdv7_1",B="_menu_1gdv7_13",D="_content_1gdv7_20",P="_header_1gdv7_27",h={note:A,"note-content":"_note-content_1gdv7_7",menu:B,content:D,header:P},g="Muliminty",j="Muliminty-Note",W=()=>{const[t,o]=i.useState([]),[r,c]=i.useState("## 选择你感兴趣的内容吧"),[d,l]=i.useState(!1),u=k();i.useEffect(()=>{m()},[]);const m=async()=>{l(!0);try{const n=await R(g,j),s=f(n);o(s)}catch(n){c("## 敬请期待"),console.error("获取仓库树形结构失败",n)}finally{l(!1)}},f=n=>n.reduce((s,p)=>{if(v(p)){const x=_(p);x&&s.push(x)}return s},[]),v=n=>![".gitignore",".git",".obsidian",".vscode","test.txt","README.md","剪藏"].includes(n.name),_=n=>{if(n.type==="file"&&n.extension!=="md")return null;if(n.type==="directory"){const s=n.children.map(_).filter(Boolean);return s.length===0?null:{...n,children:s}}return n},N=async n=>{console.log("filePath: ",n);try{l(!0);const s=await b(g,j,n.path);c(s)}catch(s){c("加载失败"),console.error("获取文件内容失败",s)}finally{l(!1)}},w=()=>{u("/")};return e.jsxs("div",{className:h.note,children:[e.jsx(q,{onGoHome:w}),e.jsxs("div",{className:h["note-content"],children:[e.jsx(z,{dataSource:t,onClick:N}),d?e.jsx(M,{style:{width:"100%",height:"100%"}}):e.jsx(J,{data:r})]})]})},q=({onGoHome:t})=>e.jsxs("div",{className:h.header,children:[e.jsx("h3",{onClick:t,style:{cursor:"pointer"},children:"Muliminty"}),e.jsx($,{})]}),z=({dataSource:t=[],onClick:o})=>e.jsx("div",{className:h.menu,children:e.jsx(y,{dataSource:t,onClick:o})}),J=({data:t})=>e.jsx("div",{className:h.content,children:t?e.jsx(O,{data:t}):e.jsx("div",{children:"暂无数据"})});export{W as default};
