import{r as u,j as e}from"./index-K3tXY14x.js";import{t as v}from"./terminal.config-CtAvLxDc.js";import{s as I,r as R,b as k}from"./blogs-GHtfNctV.js";const $=({onExecute:i,commandHistory:t=[]})=>{const[o,c]=u.useState(""),[n,g]=u.useState(-1),[m,y]=u.useState(""),f=u.useRef(null),j=s=>{var l;s.preventDefault(),o.trim()!==""&&(i(o),c(""),g(-1),y(""),(l=f.current)==null||l.focus())},C=s=>{if(s.ctrlKey&&s.key==="l"){s.preventDefault(),i("clear");return}if(s.key==="Escape"){c(""),g(-1),y("");return}if(s.key==="ArrowUp"){if(s.preventDefault(),t.length>0){n===-1&&y(o);const l=n===-1?t.length-1:Math.max(0,n-1);g(l),c(t[l])}return}if(s.key==="ArrowDown"){if(s.preventDefault(),n!==-1){const l=n+1;l>=t.length?(g(-1),c(m),y("")):(g(l),c(t[l]))}return}};return u.useEffect(()=>{var s;(s=f.current)==null||s.focus()},[]),u.useEffect(()=>{const s=l=>{const r=l.target.closest(".terminal"),d=l.target.closest("button, a, input, select, textarea")||l.target.closest("[onclick]")||l.target.closest('[role="button"]');r&&!d&&!l.target.closest(".terminal-header")&&setTimeout(()=>{var h;(h=f.current)==null||h.focus()},10)};return document.addEventListener("click",s),()=>document.removeEventListener("click",s)},[]),e.jsxs("form",{onSubmit:j,className:"command-input",children:[e.jsx("span",{className:"prompt",children:"user@muliminty:~$"}),e.jsx("input",{ref:f,type:"text",value:o,onChange:s=>c(s.target.value),onKeyDown:C,autoFocus:!0,placeholder:"请输入命令"})]})},B=({type:i,content:t})=>e.jsxs("div",{className:`output-line ${i}`,children:[i==="input"?e.jsx("span",{className:"prompt",children:"user@muliminty:~$"}):null,e.jsx("div",{style:{display:"inline-block",width:"100%"},children:t})]}),S=()=>{const{about:i,theme:t}=v;return e.jsxs("div",{children:[e.jsx("div",{style:{marginBottom:"15px",color:t.primaryColor},children:"👨‍💻 关于我"}),e.jsxs("div",{style:{background:t.bgHighlight,border:`1px solid ${t.borderColor}`,borderRadius:"4px",padding:"15px",marginBottom:"10px"},children:[e.jsxs("div",{style:{margin:"8px 0"},children:[e.jsx("span",{style:{color:"#888"},children:"姓名:"})," ",e.jsx("span",{style:{color:t.textColor},children:i.name})]}),e.jsxs("div",{style:{margin:"8px 0"},children:[e.jsx("span",{style:{color:"#888"},children:"职业:"})," ",e.jsx("span",{style:{color:t.textColor},children:i.job})]}),e.jsxs("div",{style:{margin:"8px 0"},children:[e.jsx("span",{style:{color:"#888"},children:"技能:"})," ",e.jsx("span",{style:{color:t.primaryColor},children:i.skills})]}),e.jsxs("div",{style:{margin:"8px 0"},children:[e.jsx("span",{style:{color:"#888"},children:"简介:"}),e.jsx("div",{style:{color:t.textColor,marginTop:"5px",lineHeight:"1.6"},children:i.bio})]})]})]})},E=()=>{const{projects:i,theme:t}=v;return e.jsxs("div",{children:[e.jsx("div",{style:{marginBottom:"15px",color:t.primaryColor},children:"🚀 我的项目"}),i.map((o,c)=>e.jsxs("div",{style:{background:t.bgHighlight,border:`1px solid ${t.borderColor}`,borderRadius:"4px",padding:"15px",marginBottom:"15px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:n=>{n.currentTarget.style.background=t.bgHover,n.currentTarget.style.borderColor=t.bgHover},onMouseLeave:n=>{n.currentTarget.style.background=t.bgHighlight,n.currentTarget.style.borderColor=t.borderColor},onClick:()=>{o.link!=="#"&&window.open(o.link,"_blank")},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"8px"},children:[e.jsx("span",{style:{fontSize:"24px",marginRight:"10px"},children:o.icon}),e.jsx("span",{style:{color:t.primaryColor,fontWeight:"bold",fontSize:"16px"},children:o.name})]}),e.jsx("div",{style:{color:t.textColor,marginBottom:"8px"},children:o.desc}),e.jsxs("div",{style:{color:"#888",fontSize:"14px"},children:["🔧 ",o.tech]})]},c))]})},L=()=>{const{links:i,theme:t}=v;return e.jsxs("div",{children:[e.jsx("div",{style:{marginBottom:"15px",color:t.primaryColor},children:"🔗 我的联系方式："}),i.map((o,c)=>e.jsxs("div",{style:{margin:"8px 0",padding:"8px 12px",background:t.bgHighlight,border:`1px solid ${t.borderColor}`,borderRadius:"4px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:n=>{n.currentTarget.style.background=t.bgHover,n.currentTarget.style.borderColor=t.bgHover},onMouseLeave:n=>{n.currentTarget.style.background=t.bgHighlight,n.currentTarget.style.borderColor=t.borderColor},onClick:()=>{window.open(o.url,"_blank")},children:[e.jsx("span",{style:{marginRight:"8px"},children:o.icon}),e.jsx("span",{style:{color:t.primaryColor,fontWeight:"bold"},children:o.name}),e.jsx("span",{style:{marginLeft:"10px",color:"#888",fontSize:"12px"},children:o.url})]},c))]})},N=(i=[],t,o)=>{const c=[{name:"clear",desc:"清空终端屏幕"},{name:"history",desc:"显示命令历史记录"},{name:"read",desc:"读取博客文章，用法：read <文章ID>"},{name:"tag",desc:"显示所有博客标签"},{name:"help",desc:"显示此帮助信息"}];return e.jsxs("div",{style:{outline:"none"},children:[e.jsxs("div",{style:{marginBottom:"15px",color:"#00ff00"},children:[e.jsx("div",{children:"🎯 可用命令列表："}),e.jsxs("div",{style:{marginTop:"10px",fontSize:"14px"},children:[e.jsx("div",{style:{marginBottom:"8px"},children:"--- 内容命令 ---"}),i.map((n,g)=>e.jsxs("div",{style:{background:"transparent",color:"#ffffff",borderRadius:4,margin:"4px 0",cursor:"pointer",padding:"4px 12px",transition:"all 0.2s",border:"1px solid transparent"},onMouseEnter:m=>{m.currentTarget.style.background="#00ff0044",m.currentTarget.style.color="#00ff00",m.currentTarget.style.borderColor="#00ff00"},onMouseLeave:m=>{m.currentTarget.style.background="transparent",m.currentTarget.style.color="#ffffff",m.currentTarget.style.borderColor="transparent"},onClick:()=>{t(n.name),o&&o(!1)},children:["• ",n.name]},n.name)),e.jsx("div",{style:{marginTop:"10px",marginBottom:"8px"},children:"--- 系统命令 ---"}),c.map((n,g)=>e.jsxs("div",{style:{color:"#ffffff",margin:"4px 0",padding:"4px 12px"},children:["• ",n.name.padEnd(12)," - ",n.desc]},n.name))]})]}),e.jsx("div",{style:{marginTop:"10px",fontSize:"13px",color:"#888"},children:"提示：点击命令执行，或手动输入命令名称"})]})},D=()=>{const{terminal:i,theme:t}=v,o=u.useRef(null),[c,n]=u.useState([{type:"input",content:e.jsx("div",{style:{whiteSpace:"pre-wrap",fontFamily:"Courier New, monospace",color:t.primaryColor},children:i.asciiArt})}]),[g,m]=u.useState([]),[y,f]=u.useState(!1),[j,C]=u.useState(i.showTip);u.useEffect(()=>{const r=o.current;if(!r)return;const d=r.getContext("2d"),h=[],{particles:a}=t;r.width=window.innerWidth,r.height=window.innerHeight;class p{constructor(){this.x=Math.random()*r.width,this.y=Math.random()*r.height,this.size=Math.random()*(a.maxSize-a.minSize)+a.minSize,this.speedY=Math.random()*(a.maxSpeed-a.minSpeed)+a.minSpeed,this.opacity=Math.random()*(a.maxOpacity-a.minOpacity)+a.minOpacity}update(){this.y+=this.speedY,this.y>r.height&&(this.y=0,this.x=Math.random()*r.width)}draw(){const w=t.primaryColor.match(/\d+/g),M=parseInt(w[0],16)||0,z=parseInt(w[1],16)||255,H=parseInt(w[2],16)||0;d.fillStyle=`rgba(${M}, ${z}, ${H}, ${this.opacity})`,d.beginPath(),d.arc(this.x,this.y,this.size,0,Math.PI*2),d.fill()}}for(let b=0;b<a.count;b++)h.push(new p);const x=()=>{d.clearRect(0,0,r.width,r.height),h.forEach(b=>{b.update(),b.draw()}),requestAnimationFrame(x)};x();const T=()=>{r.width=window.innerWidth,r.height=window.innerHeight};return window.addEventListener("resize",T),()=>window.removeEventListener("resize",T)},[i.enableParticles,t]);const s=r=>{const[d,...h]=r.trim().split(" ");if(d.toLowerCase()==="clear"){n([]);return}if(r.trim()&&m(a=>{const p=[...a,r];return p.length>100?p.slice(-100):p}),d.toLowerCase()==="history"){const a=c.filter((p,x)=>p.type==="input"&&x>0).map((p,x)=>`${x+1}. ${p.content}`).join(`
`)||"暂无历史记录";n(p=>[...p,{type:"input",content:r},{type:"output",content:a}]);return}n(a=>[...a,{type:"input",content:r},{type:"output",content:l(r,h)}])},l=(r,d=[])=>{const[h,...a]=r.trim().split(" "),p=[{name:"about",fn:S},{name:"projects",fn:E},{name:"blogs",fn:k},{name:"link",fn:L}];switch(h.toLowerCase()){case"about":return S();case"projects":return E();case"blogs":{const x=a.indexOf("--tag");return x!==-1&&a[x+1]?k(s,a[x+1]):k(s)}case"read":return d.length===0?"请指定文章ID，例如：read 1":R(d[0]);case"tag":case"tags":return I(s);case"help":return N(p,s,f);case"link":return L();case"clear":case"history":return null;default:return`未知命令: ${h}，输入 'help' 查看可用命令`}};return e.jsxs("div",{className:"terminal",children:[e.jsx("canvas",{ref:o,className:"particle-bg"}),j&&e.jsx("div",{className:"terminal-header",children:e.jsx("div",{onClick:()=>C(!1),style:{color:"#00ff00",fontSize:"12px",marginBottom:"10px",padding:"5px 10px",background:"rgba(0, 255, 0, 0.05)",border:"1px solid rgba(0, 255, 0, 0.2)",borderRadius:"4px",opacity:.8,cursor:"pointer",transition:"opacity 0.2s"},onMouseEnter:r=>r.currentTarget.style.opacity="1",onMouseLeave:r=>r.currentTarget.style.opacity="0.8",children:"💡 快捷键提示: Ctrl+L 清屏 | ESC 清空输入 | ↑↓ 浏览历史命令 (点击隐藏)"})}),e.jsx("div",{className:"output",children:c.map((r,d)=>e.jsx(B,{type:r.type,content:r.content},d))}),!y&&e.jsx($,{onExecute:s,commandHistory:g})]})},W=()=>e.jsx("div",{className:"home",children:e.jsx(D,{})});export{W as default};
